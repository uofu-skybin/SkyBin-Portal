<div id='my-files-container'>
    <div id='my-files-buttons'>
        <!-- Primary my-files functionality buttons. -->
        <button mat-raised-button class='skybin-btn-primary' (click)='uploadClicked()' name='my-files-upload-button'>
            Upload
        </button>
        <button mat-raised-button class='skybin-btn-primary' (click)='downloadClicked()'
                name='my-files-download-button'>
            Download
        </button>
        <button mat-raised-button class='skybin-btn-primary' (click)='shareClicked()' name='my-files-share-button'>
            Share
        </button>
        <button mat-raised-button class='skybin-btn-primary' (click)='newFolderClicked()'
                name='my-files-new-folder-button'>
            New Folder
        </button>

        <!-- Group storage info views. -->
        <span id='my-files-storage-management-container'>
            <!-- Show available/reserved storage space. -->
            <span id='available-space-container' mat-tooltip='tooltip'>
                <b>Available:</b> {{renterInfo.freeStorage | bytes}}
            </span>
            <!-- Storage management widgets. -->
            <button id='reserve-space-button' mat-mini-fab class='skybin-btn-primary' (click)='addStorageClicked()' matTooltip="Tooltip!"
                    name='my-files-new-folder-button'>
                <i id='plus-icon' class='fa fa-plus' aria-hidden='true'></i>
            </button>
            <button id='configure-space-button' mat-mini-fab class='skybin-btn-primary' (click)='configureStorageClicked()' matTooltip='Configure your renter settings!'
                    name='my-files-new-folder-button'>
                <i id='settings-icon' class='fa fa-cog' aria-hidden='true'></i>
            </button>

        </span>

        <!-- TODO: Move the search bar into the next row up. -->
        <!-- TODO: Remove bootstrap styling in favor of goog mat design. -->
        <!-- Search/filter for my-files. -->
        <!--<div id='my-files-search-container' class='input-group'>-->
        <!--&lt;!&ndash; <span class="input-group-btn"> &ndash;&gt;-->
        <!--&lt;!&ndash; <button id="search-button" class="btn" type="button">-->
        <!--<i class="fa fa-search" aria-hidden="true"></i>-->
        <!--</button>-->
        <!--</span> &ndash;&gt;-->
        <!--<input id='my-files-search'-->
        <!--[(ngModel)]='currentSearch'-->
        <!--(input)='onSearchChanged()'-->
        <!--type='text' class='form-control'-->
        <!--placeholder='&#xf002; Search...' aria-label='Search...'>-->
        <!--</div>-->
    </div>

    <!-- File context menu. Typically hidden. -->
    <div id='context-menu-container' class='context-menu-trigger'>
        <!-- This button triggers context menu opens/closes but is not displayed -->
        <button class='context-menu-trigger' mat-button #ctxtMenuTrigger='matMenuTrigger'
                [matMenuTriggerFor]='menu'></button>
        <div class='context-menu'>
            <mat-menu #menu='matMenu'>
                <button mat-menu-item (click)='downloadFile(selectedFile)'>Download</button>
                <button mat-menu-item (click)='shareClicked()'>Share</button>
                <button mat-menu-item (click)='deleteFile(selectedFile)'>Delete</button>
                <button mat-menu-item (click)='viewDetails(selectedFile)'>View Details</button>
            </mat-menu>
        </div>
    </div>

    <!-- Folder context menu. Typically hidden. -->
    <div id='folder-context-menu-container' class='context-menu-trigger'>
        <!-- This button triggers context menu opens/closes but is not displayed -->
        <button class='context-menu-trigger' mat-button #ctxtMenuTriggerFolder='matMenuTrigger'
                [matMenuTriggerFor]='menuFolder'></button>
        <div class='context-menu'>
            <mat-menu #menuFolder='matMenu'>
                <button mat-menu-item (click)='deleteFile(selectedFile)'>Delete</button>
            </mat-menu>
        </div>
    </div>


    <!--<div id='insufficient-storage-alert' class="alert alert-danger alert-dismissible fade show" role="alert">-->
        <!--<a class="close" onclick="$('#insufficient-storage-alert').hide()">Ã—</a>-->
        <!--&lt;!&ndash;<button type="button" class="close" data-dismiss="alert" aria-label="Close">&ndash;&gt;-->
            <!--&lt;!&ndash;<span aria-hidden="true">&times;</span>&ndash;&gt;-->
        <!--&lt;!&ndash;</button>&ndash;&gt;-->
        <!--<strong>Error!</strong> You don't have enough storage reserved to upload.-->
    <!--</div>-->

    <app-filebrowser
        [filesToDisplay]='filteredFiles'
        (onPathChanged)='onPathChanged($event)'
        (onFileSelected)='onFileSelected($event)'
        (onFileContextClick)='onContextClick($event)'
        (drop)="onDrop($event)"
        (dragover)="onDragOver($event)"
        ></app-filebrowser>

    <!-- Uploads popup -->
    <div id='popups-container'>
        <div *ngIf='showUploads' id='uploads-overlay' class='modal in' tabindex='-1' type='dialog' data-show='true'>
            <div class='modal-dialog modal-sm' role='document'>
                <div class='modal-content'>
                    <div class='modal-header'>
                        <h5 mat-dialog-title>Uploads</h5>
                        <button (click)='hideUploads()' type='button' class='close' data-dismiss='modal'
                                aria-label='Close'>
                            <span aria-hidden='true'>&times;</span>
                        </button>
                    </div>
                    <div class='modal-body'>
                        <div *ngFor='let upload of uploads' class='upload-item'>
                            <div>
                                {{baseName(upload.destPath)}}
                                <i *ngIf="upload.state === 'TRANSFER_DONE'" class='fa fa-check-circle transfer-icon'
                                   aria-hidden='true'></i>
                                <i *ngIf="upload.state === 'TRANSFER_ERROR'"
                                   class='fa fa-exclamation-circle transfer-icon' aria-hidden='true'></i>
                            </div>
                            <mat-progress-bar *ngIf="upload.state === 'TRANSFER_RUNNING'"
                                              mode='indeterminate'></mat-progress-bar>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Downloads popup -->
        <div *ngIf='showDownloads' id='uploads-overlay' class='modal in' tabindex='-1' type='dialog' data-show='true'>
            <div class='modal-dialog modal-sm' role='document'>
                <div class='modal-content'>
                    <div class='modal-header'>
                        <h5 mat-dialog-title>Downloads</h5>
                        <button (click)='hideDownloads()' type='button' class='close' data-dismiss='modal'
                                aria-label='Close'>
                            <span aria-hidden='true'>&times;</span>
                        </button>
                    </div>
                    <div class='modal-body'>
                        <div *ngFor='let download of downloads' class='upload-item'>
                            <div>
                                {{download.destPath}}
                                <i *ngIf="download.state === 'TRANSFER_DONE'" (click)='showFinishedDownload(download)'
                                   class='fa fa-search transfer-icon' aria-hidden='true'></i>
                                <i *ngIf="download.state === 'TRANSFER_ERROR'"
                                   class='fa fa-exclamation-circle transfer-icon' aria-hidden='true'></i>
                            </div>
                            <mat-progress-bar *ngIf="download.state === 'TRANSFER_RUNNING'"
                                              mode='indeterminate'></mat-progress-bar>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>
</div>
